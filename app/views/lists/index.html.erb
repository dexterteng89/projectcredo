<%
  @title = 'Home'
  @full_width = true
  @body_class = "list-index"
%>

<div id="search-lists"></div>

<% content_for(:page_app) do %>
  <script>
    searchLists.template = `
      <div>
        <div class="row">
          <div class="form-group col-md-3">
              <input
                class="form-control query-input"
                v-model="query"
                v-bind:placeholder="placeholder"
                v-on:keyup="getResults"
                v-on:keyup.esc="clearResults"
              >

              <ul class="list-group autocomplete" v-if="this.results.length">
                <li
                  class="list-group-item"
                  v-for="result in results"
                  v-html="result"
                  v-on:click="selectResult(result)"
                >
                </li>
              </ul>

          </div>
        </div>

        <div v-if="pinnedLists.length" >
          <div class="row">
            <div class="col-md-12">
              <h1>Pinned Lists</h1>
            </div>
          </div>

          <div class="cards row">
            <div class="col-md-3">
              <a href="lists/new" class="btn panel panel-default new-list">
                <h2>Create a new list</h2>
              </a>
            </div>
            <single-list v-for="list in pinnedLists" v-if="showList(list)"
              :name="list.name"
              :id="list.id"
              :pinned="list.pinned"
              :slug="list.slug"
              :voted="list.voted"
              :votes="list.votes"
              :editable="list.editable"
              :owner="list.owner"
              :tagList="list.tagList"
              :description="list.description"
              :updatedAt="list.updatedAt"
              :commentsCount="list.commentsCount"
            ></single-list>
          </div>

        </div>

        <div v-if="unpinnedLists.length">
          <div class="row">
            <div class="col-md-12">
              <h1>Lists</h1>
            </div>
          </div>

          <div class="cards row">
            <div class="col-md-3">
              <a href="lists/new" class="btn panel panel-default new-list">
                <h2>Create a new list</h2>
              </a>
            </div>
            <single-list v-for="list in unpinnedLists" v-if="showList(list)"
              :name="list.name"
              :id="list.id"
              :pinned="list.pinned"
              :slug="list.slug"
              :voted="list.voted"
              :votes="list.votes"
              :editable="list.editable"
              :owner="list.owner"
              :tagList="list.tagList"
              :description="list.description"
              :updatedAt="list.updatedAt"
              :commentsCount="list.commentsCount"
            ></single-list>
          </div>
        </div>
      </div>
    `
    searchLists = new Vue(searchLists)
    searchLists.$mount('#search-lists')
  </script>
<% end %>
